# 🛠️ ToDo List 개발자 가이드

이 문서는 **ToDo List** 프로젝트의 설계 원칙과 구현 상세 내용을 다룹니다. 프로젝트의 구조와 핵심 로직을 이해하여 유지보수 및 기능 확장에 활용할 수 있습니다.

## 1. 설계 주요 내용 (Design Key Points)

본 프로젝트는 **사용자 경험(UX)**과 **코드의 유지보수성**을 최우선으로 고려하여 설계되었습니다.

### 🏗️ 모듈화된 아키텍처 (Modular Architecture)

- **관심사의 분리**: UI 렌더링(`app.js`), 상태 관리(`state.js`), 데이터 저장(`storage.js`), 상수 정의(`constants.js`)로 역할을 명확히 분리했습니다.
- **ES6 모듈 시스템**: `import`/`export`를 사용하여 코드의 의존성을 명확히 하고 재사용성을 높였습니다.

### 🎨 사용자 중심 UX 설계

- **직관적인 인터랙션**: `prompt` 창 대신 **인라인 수정(Inline Edit)** 방식을 채택하여 문맥 전환 없는 부드러운 수정 경험을 제공합니다.
- **유연한 사용성**: **드래그 앤 드롭**을 통한 자유로운 순서 변경과 다양한 정렬 옵션(최신순, 마감일순 등)을 지원합니다.
- **시각적 편의성**: 시스템 설정이나 사용자 선호에 따른 **다크 모드**를 지원하여 시각적 피로도를 줄입니다.

### 💾 서버리스 데이터 영속성

- **LocalStorage 활용**: 별도의 백엔드 서버 없이 브라우저의 `LocalStorage`를 데이터베이스로 활용합니다. 이를 통해 네트워크 없이도 동작하며, 새로고침 후에도 데이터가 유지됩니다.

---

## 2. 구현 내용 (Implementation Details)

### 🔄 상태 관리 (State Management)

- **Single Source of Truth**: `state.js` 파일의 `state` 객체가 애플리케이션의 모든 데이터(할 일 목록, 삭제된 목록)를 관리합니다.
- **데이터 흐름**: `UI 이벤트` -> `State 업데이트` -> `LocalStorage 저장` -> `UI 리렌더링`의 단방향 흐름을 유지하여 데이터 불일치를 방지합니다.

### 🖥️ DOM 조작 및 렌더링

- **동적 렌더링**: `renderTodos()` 함수는 `state`의 변경 사항을 감지하여 리스트 전체를 다시 그립니다. 이는 상태와 UI의 동기화를 보장합니다.
- **요소 생성**: `paintTodo()` 함수에서 `createElement`를 사용하여 보안상 안전하게 DOM 요소를 생성하고 조립합니다.

### 🛠️ 핵심 기능 구현 로직

#### 1. 인라인 수정 (Inline Editing)

기존의 팝업 방식이 아닌, 텍스트가 입력창으로 변하는 방식을 구현했습니다.

- **전환 로직**: '수정' 버튼 클릭 시 `span` 태그를 `textarea` 태그로 교체(`replaceChild`)합니다.
- **UX 디테일**: 수정 모드 진입 시 `textarea`에 자동으로 포커스를 주고, 드래그 앤 드롭 기능을 일시적으로 비활성화하여 오작동을 방지합니다.
- **저장 로직**: '저장' 클릭 시 변경된 내용을 `state`에 반영하고 다시 텍스트 모드로 복귀합니다.

#### 2. 드래그 앤 드롭 (Drag & Drop)

- **리스트 순서 변경**: `draggable="true"` 속성과 `dragstart`, `dragover`, `dragend` 이벤트를 활용하여 구현했습니다. 드래그 종료 시 DOM 순서를 읽어 `state.toDos` 배열을 재정렬합니다.
- **캘린더 연동 (기한 변경)**:
  - 캘린더 날짜 셀(`div.calendar-date`)에 `dragover`와 `drop` 이벤트 리스너를 등록했습니다.
  - 할 일 항목을 날짜 위로 드래그하면(`drop`), 해당 할 일의 `date` 속성을 드롭된 날짜로 업데이트하고 저장(`saveToDos`) 및 리렌더링합니다.

#### 3. 필터링, 정렬 및 통계

- **정렬**: `Array.prototype.sort()`를 활용하여 최신순, 오래된순, 카테고리순, 마감일순 정렬을 구현했습니다.
- **마감일 계산**: `getRemainingText` 함수를 통해 현재 날짜와 마감일을 비교하여 'D-Day', '마감 임박(색상 강조)' 등의 상태를 실시간으로 계산하여 표시합니다.
- **통계 (Statistics)**:
  - `initStatsFeature` 함수에서 전체, 완료/미완료, 마감일 설정/초과, 주간 우선순위(일주일 내 마감) 항목을 집계하여 오버레이 형태로 제공합니다.
  - **인터랙티브 상세 보기**: 각 통계 항목(`li`)에 클릭 이벤트를 바인딩하여, 클릭 시 `showStatDetails` 함수를 호출합니다. 이 함수는 해당 조건에 맞는 할 일 목록을 필터링하여 동적으로 DOM을 생성하고 하단에 표시합니다.

#### 4. UI/UX 편의 기능

- **Sticky Layout**: CSS `position: sticky` 속성을 사용하여 캘린더와 메모 영역이 스크롤 시에도 화면 상단(`top: 20px`)에 고정되도록 구현했습니다.
- **다크 모드**: CSS Variables와 `body.dark-mode` 클래스를 활용하여 테마 전환을 구현했습니다.
- **메모 기능**: 특정 할 일 클릭 시 `handleTodoClick`이 호출되어 우측 메모 영역에 해당 할 일의 `memo` 데이터를 로드하고 수정할 수 있게 합니다.

---

## 3. 프로젝트 구조

```
root/
├── index.html          # 메인 HTML (앱 진입점)
├── style.css           # 스타일 시트 (Flexbox 레이아웃, 다크모드 변수)
├── js/                 # 자바스크립트 소스
│   ├── app.js          # 메인 로직 (이벤트 핸들링, 렌더링)
│   ├── state.js        # 전역 상태 객체
│   ├── storage.js      # LocalStorage CRUD 유틸리티
│   └── constants.js    # 상수 모음
└── ...
```

## 4. 기술 스택

- **Core**: HTML5, CSS3, JavaScript (Vanilla ES6+)
- **Storage**: Web Storage API (LocalStorage)
- **Version Control**: Git

---

이 가이드는 프로젝트의 핵심 설계와 구현을 이해하는 데 도움을 주기 위해 작성되었습니다.

- [📖 사용자 가이드 (User Guide)](./USER_GUIDE.md): 기능별 상세 사용법 안내
- [📄 README로 이동](./README.md)
